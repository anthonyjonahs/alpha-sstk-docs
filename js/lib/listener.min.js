!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).shutterstockPrivateanalyticsListener=e()}}(function(){return function e(t,n,o){function i(a,c){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!c&&s)return s(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return i(n||e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){(function(n){var o=e("./logger.js"),i=e("./handler.js"),r=e("./tracker.js"),a=e("./binder.js"),c=e("./validator.js"),s=e("gator");!function(e,n){t.exports=n,e.AnalyticsListener=n(e)}(n,function(e){var t=o(e),n=i(e),l=r(e),u=a(e),f=c(e),d=function(){t.log("validateTrackingData"),Array.prototype.slice.call(e.document.querySelectorAll("[data-track]")).forEach(function(e){var o=e.getAttribute("data-track"),i=n.parseTrackAttribute(o),r=f.buildValidateMessage(i,o,e);r.length&&(r.unshift(e),r.unshift("Issues found with the following element: "),t.error.apply({},r))})};return{listen:function(o){var i;t.log("listen"),e.debugAnalytics&&d(),i=o||function(){return{}},u.attachDirectEventListeners(u.directEventActionsSelector,"mouseenter",n.handleAction("hover",i,s),s),u.setUpListeners(s,n.handleAction,i)},validate:d,track:l.sendTrack,VERSION:"3.0.3"}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./binder.js":2,"./handler.js":3,"./logger.js":4,"./tracker.js":5,"./validator.js":6,gator:7}],2:[function(e,t,n){t.exports=function(e){function t(t){var n=e.document.createElement("style"),o="@keyframes nodeInserted{from{outline-color:#fff}to{outline-color:#000}}@-moz-keyframes nodeInserted{from{outline-color:#fff}to{outline-color:#000}}@-webkit-keyframes nodeInserted{from{outline-color:#fff}to{outline-color:#000}}@-ms-keyframes nodeInserted{from{outline-color:#fff}to{outline-color:#000}}@-o-keyframes nodeInserted{from{outline-color:#fff}to{outline-color:#000}}"+t+"{animation-duration:.01s;-o-animation-duration:.01s;-ms-animation-duration:.01s;-moz-animation-duration:.01s;-webkit-animation-duration:.01s;animation-name:nodeInserted;-o-animation-name:nodeInserted;-ms-animation-name:nodeInserted;-moz-animation-name:nodeInserted;-webkit-animation-name:nodeInserted};";n.type="text/css",n.styleSheet?n.styleSheet.cssText=o:n.appendChild(e.document.createTextNode(o)),e.document.getElementsByTagName("head")[0].appendChild(n)}var n=["click","submit","linkClick","change"],o=["hover"];return{directEventActions:o,supportedEventActions:n.concat(o),directEventActionsSelector:o.map(function(e){return'[data-track^="'+e+'"]'}).join(","),attachDirectEventListeners:function(n,o,i,r){function a(e){"nodeInserted"===(e.animationName||e.originalEvent&&e.originalEvent.animationName)&&r(e.target).off(o,i).on(o,i)}r(e.document).on(o,n,i),t(n),r(e.document).on("animationstart",a),r(e.document).on("MSAnimationStart",a),r(e.document).on("webkitAnimationStart",a)},setUpListeners:function(t,o,i){n.forEach(function(n){var r="linkClick"===n?"click":n;t(e.document).on(r,"[data-track]",o(n,i,t))})}}}},{}],3:[function(e,t,n){var o=e("./logger.js"),i=e("./tracker.js");t.exports=function(e){function t(e){return JSON.parse(e)}function n(e){var n,o,i=e.trim().split(".");if(i.length<3||-1!==e.indexOf(" "))return null;if(n={eventAction:i[0].split(","),pageSection:i[1],eventLabel:i[2]},(o=i.slice(3).join(".")).length)try{n.eventValue=t(o)}catch(e){f.error("Unable to parse eventValue as JSON: "+e.toString()),n.eventValue=null}return n}function r(t,n,o){"string"==typeof t[n]&&e.debugAnalytics&&f.error("`getFirstData` function assigned data to reserved property: "+n+". This data will be overwritten."),t[n]=o}function a(e){return e.selectedOptions?[].slice.call(e.selectedOptions):[].slice.call(e.options).filter(function(e){return e.selected})}function c(t,n,o){"select-multiple"===t.type?r(o.eventValue,"formElementValue",a(t).map(function(e){return e.value})):"checkbox"===t.type?r(o.eventValue,"formElementValue",[].slice.call(e.document.getElementsByName(t.name)).filter(function(e){return e.checked}).map(function(e){return e.value})):void 0!==t.value&&r(o.eventValue,"formElementValue",t.value),d.sendTrack(n,o)}function s(e,t,n,o){var i=(new Date).getTime(),a=function(){var c=(new Date).getTime()-i;c>(n.eventValue.hoverTimeThreshold||1500)&&(r(n.eventValue,"hoverTime",c),d.sendTrack(t,n)),o(e).off("mouseleave",a)};o(e).on("mouseleave",a)}function l(e,t){d.sendTrack(e,t)}function u(e,t,n){d.link(e,t,n)}var f=o(e),d=i(e);return{parseTrackAttribute:n,assignProp:r,handleAction:function(t,o,i){return function(a){var d,m=this.getAttribute("data-track"),v=a.target,h=n(m);if(h&&h.eventAction.indexOf(t)>-1){r(d=o(this,a,m),"eventAction",t),r(d,"pageSection",h.pageSection),r(d,"eventLabel",h.eventLabel),r(d,"url",e.document.URL),r(d,"eventCategory","userInteraction"),r(d,"name",void 0!==v.name&&""!==v.name?v.name:v.textContent),void 0!==h.eventValue&&null!==h.eventValue?r(d,"eventValue",h.eventValue):r(d,"eventValue",{});try{"linkClick"===t?u(v,m,d):"hover"===t?s(v,m,d,i):"change"===t?c(v,m,d):l(m,d)}catch(e){f.error(e)}}}}}}},{"./logger.js":4,"./tracker.js":5}],4:[function(e,t,n){t.exports=function(e){return{log:function(){e.debugAnalytics&&e.console.log.apply(e.console,arguments)},error:function(){e.debugAnalytics&&e.console.error.apply(e.console,arguments)}}}},{}],5:[function(e,t,n){var o=e("./logger.js");t.exports=function(e){var t=o(e);return{link:function(n,o,i){t.log("Tracking Link: ",o,i),e.analytics.trackLink(n,o,i)},sendTrack:function(n,o){var i;o.visit?o.visit.visitorId?i={Optimizely:{userId:o.visit.visitorId}}:t.error("No visitor ID present in analytics data",o):t.error("Analytics data missing required object 'visit'!",n,o),t.log("Tracking: ",n,o,i),e.analytics.track(n,o,i)}}}},{"./logger.js":4}],6:[function(e,t,n){var o=e("./binder.js");t.exports=function(e){var t=o(e);return{buildValidateMessage:function(e,n,o){var i=[];return e?(e.eventAction.forEach(function(e,n){-1===t.supportedEventActions.indexOf(e)?i.push("\n- Cannot track element because its eventAction `"+e+"` is not one of supported types: ["+t.supportedEventActions+"]"):n>0&&t.directEventActions.indexOf(e)>-1&&i.push("\n- Cannot track element because its eventAction `"+e+"` must at the beginning of the attribute string")}),null===e.eventValue&&i.push("\n- Cannot parse eventValue as JSON from <eventAction>.<pageSection>.<eventLabel>.<eventValue JSON> See error output above."),-1===e.eventAction.indexOf("submit")&&o.children.length>0&&i.push("\n- Element has children, which could lead to unexpected text recorded in the `name` field.  Confirm that the behavior is as expected."),e.eventAction.indexOf("submit")>-1&&!o.name&&i.push("\n- Form has no name attribute, which leads to nothing recorded in the `name` field.  Confirm that the behavior is as expected.")):n.trim().indexOf(" ")>-1?i.push("\n- Cannot track element because its data-track string contains spaces"):i.push("\n- Cannot track element because data-track attribute does not match form of <eventAction>.<pageSection>.<eventLabel>[.<eventValue JSON>]"),i.length&&(i.unshift(o),i.unshift("Issues found with the following element: ")),i}}}},{"./binder.js":2}],7:[function(e,t,n){!function(){function e(e){return s||(s=e.matches?e.matches:e.webkitMatchesSelector?e.webkitMatchesSelector:e.mozMatchesSelector?e.mozMatchesSelector:e.msMatchesSelector?e.msMatchesSelector:e.oMatchesSelector?e.oMatchesSelector:c.matchesSelector)}function n(t,o,i){if("_root"==o)return i;if(t!==i)return e(t).call(t,o)?t:t.parentNode?(l++,n(t.parentNode,o,i)):void 0}function o(e,t,n,o){f[e.id]||(f[e.id]={}),f[e.id][t]||(f[e.id][t]={}),f[e.id][t][n]||(f[e.id][t][n]=[]),f[e.id][t][n].push(o)}function i(e,t,n,o){if(f[e.id])if(t)if(o||n)if(o){if(f[e.id][t][n])for(var i=0;i<f[e.id][t][n].length;i++)if(f[e.id][t][n][i]===o){f[e.id][t][n].splice(i,1);break}}else delete f[e.id][t][n];else f[e.id][t]={};else for(var r in f[e.id])f[e.id].hasOwnProperty(r)&&(f[e.id][r]={})}function r(e,t,o){if(f[e][o]){var i,r,a=t.target||t.srcElement,s={},u=0,m=0;l=0;for(i in f[e][o])f[e][o].hasOwnProperty(i)&&(r=n(a,i,d[e].element))&&c.matchesEvent(o,d[e].element,r,"_root"==i,t)&&(l++,f[e][o][i].match=r,s[l]=f[e][o][i]);for(t.stopPropagation=function(){t.cancelBubble=!0},u=0;u<=l;u++)if(s[u])for(m=0;m<s[u].length;m++){if(!1===s[u][m].call(s[u].match,t))return void c.cancel(t);if(t.cancelBubble)return}}}function a(e,t,n,a){if(this.element){e instanceof Array||(e=[e]),n||"function"!=typeof t||(n=t,t="_root");var s,l=this.id;for(s=0;s<e.length;s++)a?i(this,e[s],t,n):(f[l]&&f[l][e[s]]||c.addEvent(this,e[s],function(e){return function(t){r(l,t,e)}}(e[s])),o(this,e[s],t,n));return this}}function c(e,t){if(!(this instanceof c)){for(var n in d)if(d[n].element===e)return d[n];return u++,d[u]=new c(e,u),d[u]}this.element=e,this.id=t}var s,l=0,u=0,f={},d={};c.prototype.on=function(e,t,n){return a.call(this,e,t,n)},c.prototype.off=function(e,t,n){return a.call(this,e,t,n,!0)},c.matchesSelector=function(){},c.cancel=function(e){e.preventDefault(),e.stopPropagation()},c.addEvent=function(e,t,n){var o="blur"==t||"focus"==t;e.element.addEventListener(t,n,o)},c.matchesEvent=function(){return!0},void 0!==t&&t.exports&&(t.exports=c),window.Gator=c}()},{}]},{},[1])(1)});